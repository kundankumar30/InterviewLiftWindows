<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Interview Assistant Overlay</title>

  <!-- Tailwind (JIT) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Highlight.js  -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/python.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/java.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/cpp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/csharp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/ruby.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/sql.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/html.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/typescript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/shell.min.js"></script>
  <!-- Marked.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/12.0.0/marked.min.js" defer></script>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />
  <!-- Custom Styles -->
  <link rel="stylesheet" href="./overlay-screen.css" />
</head>

<body class="bg-transparent font-inter">
  <div class="overlay-container">
    <div class="header-bar flex justify-between p-2 bg-gray-800 text-white">
      <div id="screenshotsContainer" class="screenshots-container"></div>
      <div class="hotkey-hints-container text-sm space-x-2">
        <span><kbd>⌘</kbd> + <kbd>H</kbd>: Screenshot</span>
        <span><kbd>⌘</kbd> + <kbd>↵</kbd>: Solve</span>
        <span><kbd>⌘</kbd> + <kbd>K</kbd>: Clear</span>
        <span><kbd>⌘</kbd> + <kbd>L</kbd>: Mute</span>
        <span><kbd>⌘</kbd> + <kbd>B</kbd>: Hide</span>
        <span><kbd>⌘</kbd> + <kbd>Q</kbd>: Quit</span>
      </div>
      <div class="screen-protection-toggle flex items-center gap-2">
        <span>Protection:</span>
        <label class="toggle-switch">
          <input type="checkbox" id="screenProtectionToggle" checked />
          <span class="toggle-slider"></span>
        </label>
      </div>
    </div>

    <span id="status-dot" class="status-dot-corner bg-gray-500"></span>

    <div class="main-content-split flex">
      <div id="transcriptArea" class="transcript-area w-1/2 p-2 overflow-auto bg-gray-900 text-white">
        <p class="sticky-title font-semibold mb-2">Transcript:</p>
        <div id="transcriptContent" class="prose prose-invert"></div>
      </div>
      <div id="suggestionsArea" class="suggestions-area w-1/2 p-2 overflow-auto bg-gray-800 text-white">
        <p class="sticky-title font-semibold mb-2">AI Suggestions:</p>
        <div id="suggestionsContent" class="prose prose-invert"></div>
      </div>
    </div>

    <div class="status-bar flex items-center justify-between bg-gray-900 text-gray-400 p-2 text-xs">
      <span id="status-text">Initializing...</span>
      <div id="footerThumbnailContainer">
        <img id="footerThumbnail" class="footer-thumbnail w-16 h-10 object-cover" alt="Screen capture" />
      </div>
    </div>
  </div>

  <!-- Highlight + Marked init script -->
  <script defer>
    window.addEventListener('DOMContentLoaded', () => {
      hljs.highlightAll();

      if (typeof marked !== 'undefined') {
        marked.setOptions({
          gfm: true,
          breaks: true,
          highlight: function(code, lang) {
            try {
              return hljs.highlight(code, { language: lang || 'plaintext', ignoreIllegals: true }).value;
            } catch (_) {
              return code;
            }
          }
        });
      }

      // Optional: setup render function
      window.renderMarkdownToHTML = (markdown, targetId) => {
        const target = document.getElementById(targetId);
        if (target && typeof marked !== 'undefined') {
          target.innerHTML = marked.parse(markdown);
        }
      };
    });
  </script>

  <script src="overlay-renderer.js" defer></script>
</body>
</html>
